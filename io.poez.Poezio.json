{
    "app-id": "io.poez.Poezio",
    "runtime": "org.freedesktop.Platform",
    "runtime-version": "24.08",
    "sdk": "org.freedesktop.Sdk",
    "sdk-extensions": [
        "org.freedesktop.Sdk.Extension.rust-stable"
    ],
    "command": "poezio",
    "finish-args": [
        "--filesystem=xdg-cache/poezio:create",
        "--filesystem=xdg-config/poezio:create",
        "--filesystem=xdg-data/poezio:create",
        "--share=network"
    ],
    "cleanup": [
        "/bin/chardetect",
        "/bin/normalizer",
        "/include",
        "/lib/pkgconfig",
        "/lib/python3.12/site-packages/cffi",
        "/lib/python3.12/site-packages/poezio/poopt.py",
        "/lib/python3.12/site-packages/pycparser",
        "/lib/python3.12/site-packages/pygtkcompat",
        "py.typed",
        "*.c",
        "*.h",
        "*.la",
        "*.pxd",
        "*.pxi",
        "*.pyi",
        "*.pyx",
        "/share/doc",
        "/share/man",
        "/share/poezio"
    ],
    "modules": [
        {
            "name": "python3-pyasn1",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app pyasn1-0.6.1-py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/c8/f1/d6a797abb14f6283c0ddff96bbdd46937f64122b8c925cab503dd37f8214/pyasn1-0.6.1-py3-none-any.whl",
                    "sha256": "0d632f46f2ba09143da3a8afe9e33fb6f92fa2320ab7e886e2d0f7672af84629"
                }
            ]
        },
        {
            "name": "python3-pyasn1-modules",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app pyasn1_modules-0.4.1-py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/77/89/bc88a6711935ba795a679ea6ebee07e128050d6382eaa35a0a47c8032bdc/pyasn1_modules-0.4.1-py3-none-any.whl",
                    "sha256": "49bfa96b45a292b711e986f222502c1c9a5e1f4e568fc30e2574a6c7d07838fd"
                }
            ]
        },
        {
            "name": "python3-pycparser",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app pycparser-2.22-py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/13/a3/a812df4e2dd5696d1f351d58b8fe16a405b234ad2886a0dab9183fb78109/pycparser-2.22-py3-none-any.whl",
                    "sha256": "c3702b6d3dd8c7abc1afa565d7e63d53a1d0bd86cdc24edd75470f4de499cfcc"
                }
            ]
        },
        {
            "name": "python3-cffi",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --prefix=/app ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/fc/97/c783634659c2920c3fc70419e3af40972dbaf758daa229a7d6ea6135c90d/cffi-1.17.1.tar.gz",
                    "sha256": "1c39c6016c32bc48dd54561950ebd6836e1670f2ae46128f67cf49e789c52824"
                }
            ]
        },
        {
            "name": "python3-pycares",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --prefix=/app ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/1b/8f/daf60bbc06f4a3cd1cfb0ab807057151287df6f5c78f2e0d298acc9193ac/pycares-4.4.0.tar.gz",
                    "sha256": "f47579d508f2f56eddd16ce72045782ad3b1b3b678098699e2b6a1b30733e1c2"
                }
            ]
        },
        {
            "name": "python3-attrs",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app attrs-24.2.0-py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/6a/21/5b6702a7f963e95456c0de2d495f67bf5fd62840ac655dc451586d23d39a/attrs-24.2.0-py3-none-any.whl",
                    "sha256": "81921eb96de3191c8258c199618104dd27ac608d9366f5e35d011eae1867ede2"
                }
            ]
        },
        {
            "name": "python3-aiodns",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app aiodns-3.2.0-py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/15/14/13c65b1bd59f7e707e0cc0964fbab45c003f90292ed267d159eeeeaa2224/aiodns-3.2.0-py3-none-any.whl",
                    "sha256": "e443c0c27b07da3174a109fd9e736d69058d808f144d3c9d56dbd1776964c5f5"
                }
            ]
        },
        {
            "name": "python3-chardet",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app chardet-5.2.0-py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/38/6f/f5fbc992a329ee4e0f288c1fe0e2ad9485ed064cac731ed2fe47dcc38cbf/chardet-5.2.0-py3-none-any.whl",
                    "sha256": "e1cf59446890a00105fe7b7912492ea04b6e6f06d4b742b2c788469e34c82970"
                }
            ]
        },
        {
            "name": "python3-multidict",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --prefix=/app ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/d6/be/504b89a5e9ca731cd47487e91c469064f8ae5af93b7259758dcfc2b9c848/multidict-6.1.0.tar.gz",
                    "sha256": "22ae2ebf9b0c69d206c003e2f6a914ea33f0a932d4aa16f236afc049d9958f4a"
                }
            ]
        },
        {
            "name": "python3-async_timeout",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app async_timeout-4.0.3-py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/a7/fa/e01228c2938de91d47b307831c62ab9e4001e747789d0b05baf779a6488c/async_timeout-4.0.3-py3-none-any.whl",
                    "sha256": "7405140ff1230c310e51dc27b3145b9092d659ce68ff733fb0cefe3ee42be028"
                }
            ]
        },
        {
            "name": "python3-idna",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app idna-3.10-py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/76/c6/c88e154df9c4e1a2a66ccf0005a88dfb2650c1dffb6f5ce603dfbd452ce3/idna-3.10-py3-none-any.whl",
                    "sha256": "946d195a0d259cbba61165e88e65941f16e9b36ea6ddb97f00452bae8b1287d3"
                }
            ]
        },
        {
            "name": "python3-expandvars",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app expandvars-0.12.0-py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/df/b3/072c28eace372ba7630ea187b7efd7f09cc8bcebf847a96b5e03e9cc0828/expandvars-0.12.0-py3-none-any.whl",
                    "sha256": "7432c1c2ae50c671a8146583177d60020dd210ada7d940e52af91f1f84f753b2"
                }
            ]
        },
        {
            "name": "python3-yarl",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --prefix=/app ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/e4/3d/4924f9ed49698bac5f112bc9b40aa007bbdcd702462c1df3d2e1383fb158/yarl-1.11.1.tar.gz",
                    "sha256": "1bb2d9e212fb7449b8fb73bc461b51eaa17cc8430b4a87d87be7b25052d92f53"
                }
            ]
        },
        {
            "name": "python3-typing_extensions",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app typing_extensions-4.12.2-py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/26/9f/ad63fc0248c5379346306f8668cda6e2e2e9c95e01216d2b8ffd9ff037d0/typing_extensions-4.12.2-py3-none-any.whl",
                    "sha256": "04e5ca0351e0f3f85c6853954072df659d0d13fac324d0072316b67d7794700d"
                }
            ]
        },
        {
            "name": "python3-frozenlist",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --prefix=/app ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/cf/3d/2102257e7acad73efc4a0c306ad3953f68c504c16982bbdfee3ad75d8085/frozenlist-1.4.1.tar.gz",
                    "sha256": "c037a86e8513059a2613aaba4d817bb90b9d9b6b69aace3ce9c877e8c8ed402b"
                }
            ]
        },
        {
            "name": "python3-charset-normalizer",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/63/09/c1bc53dab74b1816a00d8d030de5bf98f724c52c1635e07681d312f20be8/charset-normalizer-3.3.2.tar.gz",
                    "sha256": "f30c3cb33b24454a82faecaf01b19c18562b1e89558fb6c56de4d9118a032fd5"
                }
            ]
        },
        {
            "name": "python3-aiosignal",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app aiosignal-1.3.1-py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/76/ac/a7305707cb852b7e16ff80eaf5692309bde30e2b1100a1fcacdc8f731d97/aiosignal-1.3.1-py3-none-any.whl",
                    "sha256": "f8376fb07dd1e86a584e4fcdec80b36b7f81aac666ebc724e2c090300dd83b17"
                }
            ]
        },
        {
            "name": "python3-aiohappyeyeballs",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app aiohappyeyeballs-2.4.0-py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/18/b6/58ea188899950d759a837f9a58b2aee1d1a380ea4d6211ce9b1823748851/aiohappyeyeballs-2.4.0-py3-none-any.whl",
                    "sha256": "7ce92076e249169a13c2f49320d1967425eaf1f407522d707d59cac7628d62bd"
                }
            ]
        },
        {
            "name": "python3-aiohttp",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --prefix=/app ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/ca/28/ca549838018140b92a19001a8628578b0f2a3b38c16826212cc6f706e6d4/aiohttp-3.10.5.tar.gz",
                    "sha256": "f071854b47d39591ce9a17981c46790acb30518e2f83dfca8db2dfa091178691"
                }
            ]
        },
        {
            "name": "python3-slixmpp",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app ."
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/d7/fa/90ab79fd2fffcee8558cd8daa69543486d3f89b25b84890011ff1a6b378f/slixmpp-1.8.5.tar.gz",
                    "sha256": "75e3f0ad48555f7f5c9228e7066c1d4358b33d640b4fbe773ec34b03b7fae9a3"
                }
            ]
        },
        {
            "name": "python3-gobject",
            "buildsystem": "meson",
            "config-opts": [
                "-Dpycairo=disabled",
                "-Dtests=false"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/2b/58/d34e67a79631177e3c08e7d02b5165147f590171f2cae6769502af5f7f7e/pygobject-3.50.0.tar.gz",
                    "sha256": "4500ad3dbf331773d8dedf7212544c999a76fc96b63a91b3dcac1e5925a1d103"
                }
            ]
        },
        {
            "name": "python3-semantic-version",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app semantic_version-2.10.0-py2.py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/6a/23/8146aad7d88f4fcb3a6218f41a60f6c2d4e3a72de72da1825dc7c8f7877c/semantic_version-2.10.0-py2.py3-none-any.whl",
                    "sha256": "de78a3b8e0feda74cabc54aab2da702113e33ac9d9eb9d2389bcf1f58b7d9177"
                }
            ]
        },
        {
            "name": "python3-setuptools_rust",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --prefix=/app setuptools_rust-1.10.1-py3-none-any.whl"
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/43/3c/434984fca14c73e16a763f59424f06051758a01bb4d19e3f6470693790be/setuptools_rust-1.10.1-py3-none-any.whl",
                    "sha256": "3837616cc0a7705b2c44058f626c97f774eeb980f28427c16ece562661bc20c5"
                }
            ]
        },
        {
            "name": "python3-maturin",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --no-build-isolation --prefix=/app ."
            ],
            "build-options" : {
                "append-path": "/usr/lib/sdk/rust-stable/bin",
                "env": {
                    "CARGO_HOME": "/run/build/python3-maturin/cargo"
                }
            },
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/1d/ec/1f688d6ad82a568fd7c239f1c7a130d3fc2634977df4ef662ee0ac58a153/maturin-1.7.1.tar.gz",
                    "sha256": "147754cb3d81177ee12d9baf575d93549e76121dacd3544ad6a50ab718de2b9c"
                },
                "python-maturin-cargo-sources.json"
            ]
        },
        {
            "name": "python3-cryptography",
            "buildsystem": "simple",
            "build-commands": [
                "cd src/rust && cargo --offline build --release",
                "pip3 install --no-build-isolation --prefix=/app ."
            ],
            "build-options" : {
                "append-path": "/usr/lib/sdk/rust-stable/bin",
                "env": {
                    "CARGO_HOME": "/run/build/python3-cryptography/cargo"
                }
            },
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/de/ba/0664727028b37e249e73879348cc46d45c5c1a2a2e81e8166462953c5755/cryptography-43.0.1.tar.gz",
                    "sha256": "203e92a75716d8cfb491dc47c79e17d0d9207ccffcbcb35f598fbe463ae3444d"
                },
                "python-cryptography-cargo-sources.json"
            ]
        },
        {
            "name": "poezio",
            "buildsystem": "simple",
            "build-commands": [
                "patch -p1 < 0001-Make-upload-work-in-Flatpak.patch",
                "patch -p1 < 0002-plugins-replace-PathFinder.find_module-by-find_spec.patch",
                "sed -i '/^Exec=/s,=.*,=/app/bin/poezio,' data/io.poez.Poezio.desktop",
                "sed -i '/^plugins_autoload =/s,=.*,= omemo,' poezio/default_config.cfg",
                "sed -i /component/s/console-application/desktop/ data/io.poez.Poezio.appdata.xml",
                "pip3 install --prefix=/app .",
                "install -Dm644 poezio_logo.svg /app/share/icons/hicolor/scalable/apps/io.poez.Poezio.svg"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://files.pythonhosted.org/packages/6f/90/63dff79c28770f1cc5ce56284f600406a77f1dd60c7798a291a04c272ac0/poezio-0.14.tar.gz",
                    "sha256": "d9b8a3e22fa39a8683a9a289229f23d922e63c938a76b9897b77f3278bb3a420"
                },
                {
                    "type": "file",
                    "path": "0001-Make-upload-work-in-Flatpak.patch"
                },
                {
                    "type": "file",
                    "path": "0002-plugins-replace-PathFinder.find_module-by-find_spec.patch"
                },
                {
                    "type": "file",
                    "path": "poezio_logo.svg"
                }
            ]
        }
    ]
}
